angular.module("ionic-timepicker",["ionic","ionic-timepicker.templates"]).directive("ionicTimepicker",["$ionicPopup",function(t){return{restrict:"AE",replace:!0,scope:{etime:"=etime",format:"=format",step:"=step",callback:"=callback",title:"=?title"},link:function(e,i,m){i.on("click",function(){var i={epochTime:e.etime,step:e.step,format:e.format,title:e.title};e.time={hours:0,minutes:0,meridian:""};var m=new Date(60*i.epochTime*1e3);e.increaseHours=function(){e.time.hours=Number(e.time.hours),12==i.format&&(12!=e.time.hours?e.time.hours+=1:e.time.hours=1),24==i.format&&(23!=e.time.hours?e.time.hours+=1:e.time.hours=0),e.time.hours=e.time.hours<10?"0"+e.time.hours:e.time.hours},e.decreaseHours=function(){e.time.hours=Number(e.time.hours),12==i.format&&(e.time.hours>1?e.time.hours-=1:e.time.hours=12),24==i.format&&(e.time.hours>0?e.time.hours-=1:e.time.hours=23),e.time.hours=e.time.hours<10?"0"+e.time.hours:e.time.hours},e.increaseMinutes=function(){e.time.minutes=Number(e.time.minutes),e.time.minutes<60-i.step?e.time.minutes+=i.step:e.time.minutes=0,e.time.minutes=e.time.minutes<10?"0"+e.time.minutes:e.time.minutes},e.decreaseMinutes=function(){e.time.minutes=Number(e.time.minutes),e.time.minutes>=i.step?e.time.minutes-=i.step:e.time.minutes=60-i.step,e.time.minutes=e.time.minutes<10?"0"+e.time.minutes:e.time.minutes},12==i.format?(e.time.meridian=m.getUTCHours()>=12?"PM":"AM",e.time.hours=m.getUTCHours()>12?m.getUTCHours()-12:m.getUTCHours(),e.time.minutes=m.getUTCMinutes(),0==e.time.hours&&"AM"==e.time.meridian&&(e.time.hours=12),e.time.hours=e.time.hours<10?"0"+e.time.hours:e.time.hours,e.time.minutes=e.time.minutes<10?"0"+e.time.minutes:e.time.minutes,e.changeMeridian=function(){e.time.meridian="AM"===e.time.meridian?"PM":"AM"},t.show({templateUrl:"time-picker-12-hour.html",title:i.title||"<strong>12-Hour Format</strong>",subTitle:"",scope:e,buttons:[{text:"Close",onTap:function(t){e.callback(void 0,e.time)}},{text:"Set",type:"button-positive",onTap:function(t){e.loadingContent=!0;var i=0;isNaN(parseInt(e.time.minutes))||isNaN(parseInt(e.time.hours))||(i=12!=e.time.hours?60*parseInt(e.time.hours)+parseInt(e.time.minutes):parseInt(e.time.minutes),"AM"===e.time.meridian?i+=0:"PM"===e.time.meridian&&(i+=720),e.etime=i,e.callback(e.etime,e.time))}}]})):24==i.format&&(e.time.hours=m.getUTCHours(),e.time.minutes=m.getUTCMinutes(),e.time.hours=e.time.hours<10?"0"+e.time.hours:e.time.hours,e.time.minutes=e.time.minutes<10?"0"+e.time.minutes:e.time.minutes,t.show({templateUrl:"time-picker-24-hour.html",title:i.title||"<strong>24-Hour Format</strong>",subTitle:"",scope:e,buttons:[{text:"Close",onTap:function(t){e.callback(void 0,e.time)}},{text:"Set",type:"button-positive",onTap:function(t){e.loadingContent=!0;var i=0;i=24!=e.time.hours?60*parseInt(e.time.hours)+parseInt(e.time.minutes):parseInt(e.time.minutes),e.etime=i,e.callback(e.etime,e.time)}}]}))})}}}]);